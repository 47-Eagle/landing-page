import{c as p,g as pe,r as cn,j as un}from"./motion.D77LWkhN.js";import{r as dn}from"./viem.Zt6ufg3v.js";function fn(e,n){for(var t=0;t<n.length;t++){const s=n[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const r=Object.getOwnPropertyDescriptor(s,a);r&&Object.defineProperty(e,a,r.get?r:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var ln={},ee={},$={},nt={},F={},X={};Object.defineProperty(X,"__esModule",{value:!0});X.getSDKVersion=void 0;const hn=()=>"9.1.0";X.getSDKVersion=hn;var te={};Object.defineProperty(te,"__esModule",{value:!0});te.generateRequestId=void 0;const gn=e=>e.toString(16).padStart(2,"0"),_n=e=>{const n=new Uint8Array(e/2);return window.crypto.getRandomValues(n),Array.from(n,gn).join("")},vn=()=>typeof window<"u"?_n(10):new Date().getTime().toString(36);te.generateRequestId=vn;Object.defineProperty(F,"__esModule",{value:!0});F.MessageFormatter=void 0;const pn=X,En=te;class ne{}F.MessageFormatter=ne;ne.makeRequest=(e,n)=>({id:(0,En.generateRequestId)(),method:e,params:n,env:{sdkVersion:(0,pn.getSDKVersion)()}});ne.makeResponse=(e,n,t)=>({id:e,success:!0,version:t,data:n});ne.makeErrorResponse=(e,n,t)=>({id:e,success:!1,error:n,version:t});var C={};Object.defineProperty(C,"__esModule",{value:!0});C.RestrictedMethods=C.Methods=void 0;var Ie;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(Ie||(C.Methods=Ie={}));var Ae;(function(e){e.requestAddressBook="requestAddressBook"})(Ae||(C.RestrictedMethods=Ae={}));(function(e){var n=p&&p.__createBinding||(Object.create?function(r,o,d,u){u===void 0&&(u=d);var l=Object.getOwnPropertyDescriptor(o,d);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[d]}}),Object.defineProperty(r,u,l)}:function(r,o,d,u){u===void 0&&(u=d),r[u]=o[d]}),t=p&&p.__exportStar||function(r,o){for(var d in r)d!=="default"&&!Object.prototype.hasOwnProperty.call(o,d)&&n(o,r,d)};Object.defineProperty(e,"__esModule",{value:!0});const s=F;class a{constructor(o=null,d=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:u,data:l,source:v})=>{const S=!l,g=!this.isServer&&v===window.parent,_=typeof l.version<"u"&&parseInt(l.version.split(".")[0]),y=typeof _=="number"&&_>=1;let m=!0;return Array.isArray(this.allowedOrigins)&&(m=this.allowedOrigins.find(I=>I.test(u))!==void 0),!S&&g&&y&&m},this.logIncomingMessage=u=>{console.info(`Safe Apps SDK v1: A message was received from origin ${u.origin}. `,u.data)},this.onParentMessage=u=>{this.isValidMessage(u)&&(this.debugMode&&this.logIncomingMessage(u),this.handleIncomingMessage(u.data))},this.handleIncomingMessage=u=>{const{id:l}=u,v=this.callbacks.get(l);v&&(v(u),this.callbacks.delete(l))},this.send=(u,l)=>{const v=s.MessageFormatter.makeRequest(u,l);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(v,"*"),new Promise((S,g)=>{this.callbacks.set(v.id,_=>{if(!_.success){g(new Error(_.error));return}S(_)})})},this.allowedOrigins=o,this.debugMode=d,this.isServer||window.addEventListener("message",this.onParentMessage)}}e.default=a,t(C,e)})(nt);var se={},re={},ie={};Object.defineProperty(ie,"__esModule",{value:!0});ie.isObjectEIP712TypedData=void 0;const Tn=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;ie.isObjectEIP712TypedData=Tn;var st={};Object.defineProperty(st,"__esModule",{value:!0});var rt={},it={},K={},x={},Ee=p&&p.__awaiter||function(e,n,t,s){function a(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function d(v){try{l(s.next(v))}catch(S){o(S)}}function u(v){try{l(s.throw(v))}catch(S){o(S)}}function l(v){v.done?r(v.value):a(v.value).then(d,u)}l((s=s.apply(e,n||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0});x.insertParams=mn;x.stringifyQuery=In;x.fetchData=An;x.getData=On;const yn=e=>typeof e=="object"&&e!==null&&("code"in e||"statusCode"in e)&&"message"in e;function Sn(e,n,t){return e.replace(new RegExp(`\\{${n}\\}`,"g"),t)}function mn(e,n){return n?Object.keys(n).reduce((t,s)=>Sn(t,s,String(n[s])),e):e}function In(e){if(!e)return"";const n=new URLSearchParams;Object.keys(e).forEach(s=>{e[s]!=null&&n.append(s,String(e[s]))});const t=n.toString();return t?`?${t}`:""}function at(e){return Ee(this,void 0,void 0,function*(){var n;let t;try{t=yield e.json()}catch{t={}}if(!e.ok){const s=yn(t)?`CGW error - ${(n=t.code)!==null&&n!==void 0?n:t.statusCode}: ${t.message}`:`CGW error - status ${e.statusText}`;throw new Error(s)}return t})}function An(e,n,t,s,a){return Ee(this,void 0,void 0,function*(){const r=Object.assign({"Content-Type":"application/json"},s),o={method:n??"POST",headers:r};a&&(o.credentials=a),t!=null&&(o.body=typeof t=="string"?t:JSON.stringify(t));const d=yield fetch(e,o);return at(d)})}function On(e,n,t){return Ee(this,void 0,void 0,function*(){const s={method:"GET"};n&&(s.headers=Object.assign(Object.assign({},n),{"Content-Type":"application/json"})),t&&(s.credentials=t);const a=yield fetch(e,s);return at(a)})}Object.defineProperty(K,"__esModule",{value:!0});K.postEndpoint=bn;K.putEndpoint=Cn;K.deleteEndpoint=Nn;K.getEndpoint=Pn;const j=x;function ae(e,n,t,s){const a=(0,j.insertParams)(n,t),r=(0,j.stringifyQuery)(s);return`${e}${a}${r}`}function bn(e,n,t){const s=ae(e,n,t==null?void 0:t.path,t==null?void 0:t.query);return(0,j.fetchData)(s,"POST",t==null?void 0:t.body,t==null?void 0:t.headers,t==null?void 0:t.credentials)}function Cn(e,n,t){const s=ae(e,n,t==null?void 0:t.path,t==null?void 0:t.query);return(0,j.fetchData)(s,"PUT",t==null?void 0:t.body,t==null?void 0:t.headers,t==null?void 0:t.credentials)}function Nn(e,n,t){const s=ae(e,n,t==null?void 0:t.path,t==null?void 0:t.query);return(0,j.fetchData)(s,"DELETE",t==null?void 0:t.body,t==null?void 0:t.headers,t==null?void 0:t.credentials)}function Pn(e,n,t,s){if(s)return(0,j.getData)(s,void 0,t==null?void 0:t.credentials);const a=ae(e,n,t==null?void 0:t.path,t==null?void 0:t.query);return(0,j.getData)(a,t==null?void 0:t.headers,t==null?void 0:t.credentials)}var oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.DEFAULT_BASE_URL=void 0;oe.DEFAULT_BASE_URL="https://safe-client.safe.global";var ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.ImplementationVersionState=void 0;var Oe;(function(e){e.UP_TO_DATE="UP_TO_DATE",e.OUTDATED="OUTDATED",e.UNKNOWN="UNKNOWN"})(Oe||(ce.ImplementationVersionState=Oe={}));var R={};Object.defineProperty(R,"__esModule",{value:!0});R.SafeAppSocialPlatforms=R.SafeAppFeatures=R.SafeAppAccessPolicyTypes=void 0;var be;(function(e){e.NoRestrictions="NO_RESTRICTIONS",e.DomainAllowlist="DOMAIN_ALLOWLIST"})(be||(R.SafeAppAccessPolicyTypes=be={}));var Ce;(function(e){e.BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS"})(Ce||(R.SafeAppFeatures=Ce={}));var Ne;(function(e){e.TWITTER="TWITTER",e.GITHUB="GITHUB",e.DISCORD="DISCORD",e.TELEGRAM="TELEGRAM"})(Ne||(R.SafeAppSocialPlatforms=Ne={}));var T={};Object.defineProperty(T,"__esModule",{value:!0});T.LabelValue=T.StartTimeValue=T.DurationType=T.DetailedExecutionInfoType=T.TransactionListItemType=T.ConflictType=T.TransactionInfoType=T.SettingsInfoType=T.TransactionTokenType=T.TransferDirection=T.TransactionStatus=T.Operation=void 0;var Pe;(function(e){e[e.CALL=0]="CALL",e[e.DELEGATE=1]="DELEGATE"})(Pe||(T.Operation=Pe={}));var Le;(function(e){e.AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",e.AWAITING_EXECUTION="AWAITING_EXECUTION",e.CANCELLED="CANCELLED",e.FAILED="FAILED",e.SUCCESS="SUCCESS"})(Le||(T.TransactionStatus=Le={}));var we;(function(e){e.INCOMING="INCOMING",e.OUTGOING="OUTGOING",e.UNKNOWN="UNKNOWN"})(we||(T.TransferDirection=we={}));var De;(function(e){e.ERC20="ERC20",e.ERC721="ERC721",e.NATIVE_COIN="NATIVE_COIN"})(De||(T.TransactionTokenType=De={}));var Re;(function(e){e.SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",e.ADD_OWNER="ADD_OWNER",e.REMOVE_OWNER="REMOVE_OWNER",e.SWAP_OWNER="SWAP_OWNER",e.CHANGE_THRESHOLD="CHANGE_THRESHOLD",e.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",e.ENABLE_MODULE="ENABLE_MODULE",e.DISABLE_MODULE="DISABLE_MODULE",e.SET_GUARD="SET_GUARD",e.DELETE_GUARD="DELETE_GUARD"})(Re||(T.SettingsInfoType=Re={}));var Me;(function(e){e.TRANSFER="Transfer",e.SETTINGS_CHANGE="SettingsChange",e.CUSTOM="Custom",e.CREATION="Creation",e.SWAP_ORDER="SwapOrder",e.TWAP_ORDER="TwapOrder",e.SWAP_TRANSFER="SwapTransfer",e.NATIVE_STAKING_DEPOSIT="NativeStakingDeposit",e.NATIVE_STAKING_VALIDATORS_EXIT="NativeStakingValidatorsExit",e.NATIVE_STAKING_WITHDRAW="NativeStakingWithdraw"})(Me||(T.TransactionInfoType=Me={}));var je;(function(e){e.NONE="None",e.HAS_NEXT="HasNext",e.END="End"})(je||(T.ConflictType=je={}));var Be;(function(e){e.TRANSACTION="TRANSACTION",e.LABEL="LABEL",e.CONFLICT_HEADER="CONFLICT_HEADER",e.DATE_LABEL="DATE_LABEL"})(Be||(T.TransactionListItemType=Be={}));var He;(function(e){e.MULTISIG="MULTISIG",e.MODULE="MODULE"})(He||(T.DetailedExecutionInfoType=He={}));var Ge;(function(e){e.AUTO="AUTO",e.LIMIT_DURATION="LIMIT_DURATION"})(Ge||(T.DurationType=Ge={}));var Ue;(function(e){e.AT_MINING_TIME="AT_MINING_TIME",e.AT_EPOCH="AT_EPOCH"})(Ue||(T.StartTimeValue=Ue={}));var Ve;(function(e){e.Queued="Queued",e.Next="Next"})(Ve||(T.LabelValue=Ve={}));var M={};Object.defineProperty(M,"__esModule",{value:!0});M.FEATURES=M.GAS_PRICE_TYPE=M.RPC_AUTHENTICATION=void 0;var We;(function(e){e.API_KEY_PATH="API_KEY_PATH",e.NO_AUTHENTICATION="NO_AUTHENTICATION",e.UNKNOWN="UNKNOWN"})(We||(M.RPC_AUTHENTICATION=We={}));var ke;(function(e){e.ORACLE="ORACLE",e.FIXED="FIXED",e.FIXED_1559="FIXED1559",e.UNKNOWN="UNKNOWN"})(ke||(M.GAS_PRICE_TYPE=ke={}));var Ke;(function(e){e.ERC721="ERC721",e.SAFE_APPS="SAFE_APPS",e.CONTRACT_INTERACTION="CONTRACT_INTERACTION",e.DOMAIN_LOOKUP="DOMAIN_LOOKUP",e.SPENDING_LIMIT="SPENDING_LIMIT",e.EIP1559="EIP1559",e.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",e.TX_SIMULATION="TX_SIMULATION",e.EIP1271="EIP1271"})(Ke||(M.FEATURES=Ke={}));var ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.TokenType=void 0;var xe;(function(e){e.ERC20="ERC20",e.ERC721="ERC721",e.NATIVE_TOKEN="NATIVE_TOKEN",e.UNKNOWN="UNKNOWN"})(xe||(ue.TokenType=xe={}));var ot={};Object.defineProperty(ot,"__esModule",{value:!0});var U={};Object.defineProperty(U,"__esModule",{value:!0});U.NativeStakingStatus=U.ConfirmationViewTypes=void 0;var qe;(function(e){e.GENERIC="GENERIC",e.COW_SWAP_ORDER="COW_SWAP_ORDER",e.COW_SWAP_TWAP_ORDER="COW_SWAP_TWAP_ORDER",e.KILN_NATIVE_STAKING_DEPOSIT="KILN_NATIVE_STAKING_DEPOSIT",e.KILN_NATIVE_STAKING_VALIDATORS_EXIT="KILN_NATIVE_STAKING_VALIDATORS_EXIT",e.KILN_NATIVE_STAKING_WITHDRAW="KILN_NATIVE_STAKING_WITHDRAW"})(qe||(U.ConfirmationViewTypes=qe={}));var Fe;(function(e){e.NOT_STAKED="NOT_STAKED",e.ACTIVATING="ACTIVATING",e.DEPOSIT_IN_PROGRESS="DEPOSIT_IN_PROGRESS",e.ACTIVE="ACTIVE",e.EXIT_REQUESTED="EXIT_REQUESTED",e.EXITING="EXITING",e.EXITED="EXITED",e.SLASHED="SLASHED"})(Fe||(U.NativeStakingStatus=Fe={}));var V={};Object.defineProperty(V,"__esModule",{value:!0});V.SafeMessageStatus=V.SafeMessageListItemType=void 0;var Xe;(function(e){e.DATE_LABEL="DATE_LABEL",e.MESSAGE="MESSAGE"})(Xe||(V.SafeMessageListItemType=Xe={}));var Qe;(function(e){e.NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",e.CONFIRMED="CONFIRMED"})(Qe||(V.SafeMessageStatus=Qe={}));var de={};Object.defineProperty(de,"__esModule",{value:!0});de.DeviceType=void 0;var Je;(function(e){e.ANDROID="ANDROID",e.IOS="IOS",e.WEB="WEB"})(Je||(de.DeviceType=Je={}));var ct={};Object.defineProperty(ct,"__esModule",{value:!0});(function(e){var n=p&&p.__createBinding||(Object.create?function(i,c,f,h){h===void 0&&(h=f);var O=Object.getOwnPropertyDescriptor(c,f);(!O||("get"in O?!c.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(i,h,O)}:function(i,c,f,h){h===void 0&&(h=f),i[h]=c[f]}),t=p&&p.__exportStar||function(i,c){for(var f in i)f!=="default"&&!Object.prototype.hasOwnProperty.call(c,f)&&n(c,i,f)};Object.defineProperty(e,"__esModule",{value:!0}),e.setBaseUrl=void 0,e.relayTransaction=d,e.getRelayCount=u,e.getSafeInfo=l,e.getIncomingTransfers=v,e.getModuleTransactions=S,e.getMultisigTransactions=g,e.getBalances=_,e.getFiatCurrencies=y,e.getOwnedSafes=m,e.getAllOwnedSafes=I,e.getCollectibles=L,e.getCollectiblesPage=N,e.getTransactionHistory=w,e.getTransactionQueue=yt,e.getTransactionDetails=St,e.deleteTransaction=mt,e.postSafeGasEstimation=It,e.getNonces=At,e.proposeTransaction=Ot,e.getConfirmationView=bt,e.getTxPreview=Ct,e.getChainsConfig=Nt,e.getChainConfig=Pt,e.getSafeApps=Lt,e.getMasterCopies=wt,e.getDecodedData=Dt,e.getSafeMessages=Rt,e.getSafeMessage=Mt,e.proposeSafeMessage=jt,e.confirmSafeMessage=Bt,e.getDelegates=Ht,e.registerDevice=Gt,e.unregisterSafe=Ut,e.unregisterDevice=Vt,e.registerEmail=Wt,e.changeEmail=kt,e.resendEmailVerificationCode=Kt,e.verifyEmail=xt,e.getRegisteredEmail=qt,e.deleteRegisteredEmail=Ft,e.registerRecoveryModule=Xt,e.unsubscribeSingle=Qt,e.unsubscribeAll=Jt,e.getSafeOverviews=Yt,e.getContract=zt,e.getAuthNonce=Zt,e.verifyAuth=$t,e.createAccount=en,e.getAccount=tn,e.deleteAccount=nn,e.getAccountDataTypes=sn,e.getAccountDataSettings=rn,e.putAccountDataSettings=an,e.getIndexingStatus=on;const s=K,a=oe;t(ce,e),t(R,e),t(T,e),t(M,e),t(ue,e),t(ot,e),t(U,e),t(V,e),t(de,e),t(ct,e);let r=a.DEFAULT_BASE_URL;const o=i=>{r=i};e.setBaseUrl=o;function d(i,c){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/relay",{path:{chainId:i},body:c})}function u(i,c){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/relay/{address}",{path:{chainId:i,address:c}})}function l(i,c){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:i,address:c}})}function v(i,c,f,h){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:i,address:c},query:f},h)}function S(i,c,f,h){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:i,address:c},query:f},h)}function g(i,c,f,h){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:i,address:c},query:f},h)}function _(i,c,f="usd",h={}){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:i,address:c,currency:f},query:h})}function y(){return(0,s.getEndpoint)(r,"/v1/balances/supported-fiat-codes")}function m(i,c){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:i,address:c}})}function I(i){return(0,s.getEndpoint)(r,"/v1/owners/{address}/safes",{path:{address:i}})}function L(i,c,f={}){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:i,address:c},query:f})}function N(i,c,f={},h){return(0,s.getEndpoint)(r,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:i,address:c},query:f},h)}function w(i,c,f={},h){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:i,safe_address:c},query:f},h)}function yt(i,c,f={},h){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:i,safe_address:c},query:f},h)}function St(i,c){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:i,transactionId:c}})}function mt(i,c,f){return(0,s.deleteEndpoint)(r,"/v1/chains/{chainId}/transactions/{safeTxHash}",{path:{chainId:i,safeTxHash:c},body:{signature:f}})}function It(i,c,f){return(0,s.postEndpoint)(r,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:i,safe_address:c},body:f})}function At(i,c){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:i,safe_address:c}})}function Ot(i,c,f){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:i,safe_address:c},body:f})}function bt(i,c,f,h,O,_e){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/views/transaction-confirmation",{path:{chainId:i,safe_address:c},body:{operation:f,data:h,to:O,value:_e}})}function Ct(i,c,f,h,O,_e){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/transactions/{safe_address}/preview",{path:{chainId:i,safe_address:c},body:{operation:f,data:h,to:O,value:_e}})}function Nt(i){return(0,s.getEndpoint)(r,"/v1/chains",{query:i})}function Pt(i){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}",{path:{chainId:i}})}function Lt(i,c={}){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safe-apps",{path:{chainId:i},query:c})}function wt(i){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:i}})}function Dt(i,c,f,h){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/data-decoder",{path:{chainId:i},body:{operation:c,data:f,to:h}})}function Rt(i,c,f){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:i,safe_address:c},query:{}},f)}function Mt(i,c){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:i,message_hash:c}})}function jt(i,c,f){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:i,safe_address:c},body:f})}function Bt(i,c,f){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:i,message_hash:c},body:f})}function Ht(i,c={}){return(0,s.getEndpoint)(r,"/v2/chains/{chainId}/delegates",{path:{chainId:i},query:c})}function Gt(i){return(0,s.postEndpoint)(r,"/v1/register/notifications",{body:i})}function Ut(i,c,f){return(0,s.deleteEndpoint)(r,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:i,safe_address:c,uuid:f}})}function Vt(i,c){return(0,s.deleteEndpoint)(r,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:i,uuid:c}})}function Wt(i,c,f,h){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/emails",{path:{chainId:i,safe_address:c},body:f,headers:h})}function kt(i,c,f,h,O){return(0,s.putEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:i,safe_address:c,signer:f},body:h,headers:O})}function Kt(i,c,f){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify-resend",{path:{chainId:i,safe_address:c,signer:f},body:""})}function xt(i,c,f,h){return(0,s.putEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify",{path:{chainId:i,safe_address:c,signer:f},body:h})}function qt(i,c,f,h){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:i,safe_address:c,signer:f},headers:h})}function Ft(i,c,f,h){return(0,s.deleteEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:i,safe_address:c,signer:f},headers:h})}function Xt(i,c,f){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/recovery",{path:{chainId:i,safe_address:c},body:f})}function Qt(i){return(0,s.deleteEndpoint)(r,"/v1/subscriptions",{query:i})}function Jt(i){return(0,s.deleteEndpoint)(r,"/v1/subscriptions/all",{query:i})}function Yt(i,c){return(0,s.getEndpoint)(r,"/v1/safes",{query:Object.assign(Object.assign({},c),{safes:i.join(",")})})}function zt(i,c){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/contracts/{contractAddress}",{path:{chainId:i,contractAddress:c}})}function Zt(){return(0,s.getEndpoint)(r,"/v1/auth/nonce",{credentials:"include"})}function $t(i){return(0,s.postEndpoint)(r,"/v1/auth/verify",{body:i,credentials:"include"})}function en(i){return(0,s.postEndpoint)(r,"/v1/accounts",{body:i,credentials:"include"})}function tn(i){return(0,s.getEndpoint)(r,"/v1/accounts/{address}",{path:{address:i},credentials:"include"})}function nn(i){return(0,s.deleteEndpoint)(r,"/v1/accounts/{address}",{path:{address:i},credentials:"include"})}function sn(){return(0,s.getEndpoint)(r,"/v1/accounts/data-types")}function rn(i){return(0,s.getEndpoint)(r,"/v1/accounts/{address}/data-settings",{path:{address:i},credentials:"include"})}function an(i,c){return(0,s.putEndpoint)(r,"/v1/accounts/{address}/data-settings",{path:{address:i},body:c,credentials:"include"})}function on(i){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/about/indexing",{path:{chainId:i}})}})(it);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TransferDirection=e.TransactionStatus=e.TokenType=e.Operation=void 0;var n=it;Object.defineProperty(e,"Operation",{enumerable:!0,get:function(){return n.Operation}}),Object.defineProperty(e,"TokenType",{enumerable:!0,get:function(){return n.TokenType}}),Object.defineProperty(e,"TransactionStatus",{enumerable:!0,get:function(){return n.TransactionStatus}}),Object.defineProperty(e,"TransferDirection",{enumerable:!0,get:function(){return n.TransferDirection}})})(rt);var ut={};Object.defineProperty(ut,"__esModule",{value:!0});(function(e){var n=p&&p.__createBinding||(Object.create?function(s,a,r,o){o===void 0&&(o=r);var d=Object.getOwnPropertyDescriptor(a,r);(!d||("get"in d?!a.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(s,o,d)}:function(s,a,r,o){o===void 0&&(o=r),s[o]=a[r]}),t=p&&p.__exportStar||function(s,a){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(a,r)&&n(a,s,r)};Object.defineProperty(e,"__esModule",{value:!0}),t(ie,e),t(st,e),t(rt,e),t(ut,e)})(re);Object.defineProperty(se,"__esModule",{value:!0});se.TXs=void 0;const J=C,Ln=re;class wn{constructor(n){this.communicator=n}async getBySafeTxHash(n){if(!n)throw new Error("Invalid safeTxHash");return(await this.communicator.send(J.Methods.getTxBySafeTxHash,{safeTxHash:n})).data}async signMessage(n){const t={message:n};return(await this.communicator.send(J.Methods.signMessage,t)).data}async signTypedMessage(n){if(!(0,Ln.isObjectEIP712TypedData)(n))throw new Error("Invalid typed data");return(await this.communicator.send(J.Methods.signTypedMessage,{typedData:n})).data}async send({txs:n,params:t}){if(!n||!n.length)throw new Error("No transactions were passed");const s={txs:n,params:t};return(await this.communicator.send(J.Methods.sendTransactions,s)).data}}se.TXs=wn;var fe={},q={};Object.defineProperty(q,"__esModule",{value:!0});q.RPC_CALLS=void 0;q.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"};Object.defineProperty(fe,"__esModule",{value:!0});fe.Eth=void 0;const A=q,Dn=C,P={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class Rn{constructor(n){this.communicator=n,this.call=this.buildRequest({call:A.RPC_CALLS.eth_call,formatters:[null,P.defaultBlockParam]}),this.getBalance=this.buildRequest({call:A.RPC_CALLS.eth_getBalance,formatters:[null,P.defaultBlockParam]}),this.getCode=this.buildRequest({call:A.RPC_CALLS.eth_getCode,formatters:[null,P.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:A.RPC_CALLS.eth_getStorageAt,formatters:[null,P.blockNumberToHex,P.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:A.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:A.RPC_CALLS.eth_getBlockByHash,formatters:[null,P.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:A.RPC_CALLS.eth_getBlockByNumber,formatters:[P.blockNumberToHex,P.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:A.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:A.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:A.RPC_CALLS.eth_getTransactionCount,formatters:[null,P.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:A.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=t=>this.buildRequest({call:A.RPC_CALLS.eth_estimateGas})([t]),this.setSafeSettings=this.buildRequest({call:A.RPC_CALLS.safe_setSettings})}buildRequest(n){const{call:t,formatters:s}=n;return async a=>{s&&Array.isArray(a)&&s.forEach((d,u)=>{d&&(a[u]=d(a[u]))});const r={call:t,params:a||[]};return(await this.communicator.send(Dn.Methods.rpcCall,r)).data}}}fe.Eth=Rn;var le={},W={};Object.defineProperty(W,"__esModule",{value:!0});W.MAGIC_VALUE_BYTES=W.MAGIC_VALUE=void 0;const Mn="0x1626ba7e";W.MAGIC_VALUE=Mn;const jn="0x20c13b0b";W.MAGIC_VALUE_BYTES=jn;var Te={},Q={},B={};Object.defineProperty(B,"__esModule",{value:!0});B.PermissionsError=B.PERMISSIONS_REQUEST_REJECTED=void 0;B.PERMISSIONS_REQUEST_REJECTED=4001;class ye extends Error{constructor(n,t,s){super(n),this.code=t,this.data=s,Object.setPrototypeOf(this,ye.prototype)}}B.PermissionsError=ye;Object.defineProperty(Q,"__esModule",{value:!0});Q.Wallet=void 0;const ve=C,Y=B;class Bn{constructor(n){this.communicator=n}async getPermissions(){return(await this.communicator.send(ve.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(n){if(!this.isPermissionRequestValid(n))throw new Y.PermissionsError("Permissions request is invalid",Y.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(ve.Methods.wallet_requestPermissions,n)).data}catch{throw new Y.PermissionsError("Permissions rejected",Y.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(n){return n.every(t=>typeof t=="object"?Object.keys(t).every(s=>!!Object.values(ve.RestrictedMethods).includes(s)):!1)}}Q.Wallet=Bn;Object.defineProperty(Te,"__esModule",{value:!0});const Hn=Q,Ye=B,ze=(e,n)=>n.some(t=>t.parentCapability===e),Gn=()=>(e,n,t)=>{const s=t.value;return t.value=async function(){const a=new Hn.Wallet(this.communicator);let r=await a.getPermissions();if(ze(n,r)||(r=await a.requestPermissions([{[n]:{}}])),!ze(n,r))throw new Ye.PermissionsError("Permissions rejected",Ye.PERMISSIONS_REQUEST_REJECTED);return s.apply(this)},t};Te.default=Gn;var Un=p&&p.__decorate||function(e,n,t,s){var a=arguments.length,r=a<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,t):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,n,t,s);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(a<3?o(r):a>3?o(n,t,r):o(n,t))||r);return a>3&&r&&Object.defineProperty(n,t,r),r},Vn=p&&p.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(le,"__esModule",{value:!0});le.Safe=void 0;const z=dn,Ze=W,D=C,$e=q,Wn=re,kn=Vn(Te);class dt{constructor(n){this.communicator=n}async getChainInfo(){return(await this.communicator.send(D.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(D.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:n="usd"}={}){return(await this.communicator.send(D.Methods.getSafeBalances,{currency:n})).data}async check1271Signature(n,t="0x"){const s=await this.getInfo(),a=(0,z.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[n,t]}),r={call:$e.RPC_CALLS.eth_call,params:[{to:s.safeAddress,data:a},"latest"]};try{return(await this.communicator.send(D.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===Ze.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(n,t="0x"){const s=await this.getInfo(),a=(0,z.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[n,t]}),r={call:$e.RPC_CALLS.eth_call,params:[{to:s.safeAddress,data:a},"latest"]};try{return(await this.communicator.send(D.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===Ze.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(n){return(0,z.hashMessage)(n)}calculateTypedMessageHash(n){const t=typeof n.domain.chainId=="object"?n.domain.chainId.toNumber():Number(n.domain.chainId);let s=n.primaryType;if(!s){const a=Object.values(n.types),r=Object.keys(n.types).filter(o=>a.every(d=>d.every(({type:u})=>u.replace("[","").replace("]","")!==o)));if(r.length===0||r.length>1)throw new Error("Please specify primaryType");s=r[0]}return(0,z.hashTypedData)({message:n.message,domain:{...n.domain,chainId:t,verifyingContract:n.domain.verifyingContract,salt:n.domain.salt},types:n.types,primaryType:s})}async getOffChainSignature(n){return(await this.communicator.send(D.Methods.getOffChainSignature,n)).data}async isMessageSigned(n,t="0x"){let s;if(typeof n=="string"&&(s=async()=>{const a=this.calculateMessageHash(n);return await this.isMessageHashSigned(a,t)}),(0,Wn.isObjectEIP712TypedData)(n)&&(s=async()=>{const a=this.calculateTypedMessageHash(n);return await this.isMessageHashSigned(a,t)}),s)return await s();throw new Error("Invalid message type")}async isMessageHashSigned(n,t="0x"){const s=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const a of s)if(await a(n,t))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(D.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(D.Methods.requestAddressBook,void 0)).data}}le.Safe=dt;Un([(0,kn.default)()],dt.prototype,"requestAddressBook",null);var Kn=p&&p.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($,"__esModule",{value:!0});const xn=Kn(nt),qn=se,Fn=fe,Xn=le,Qn=Q;class Jn{constructor(n={}){const{allowedDomains:t=null,debug:s=!1}=n;this.communicator=new xn.default(t,s),this.eth=new Fn.Eth(this.communicator),this.txs=new qn.TXs(this.communicator),this.safe=new Xn.Safe(this.communicator),this.wallet=new Qn.Wallet(this.communicator)}}$.default=Jn;(function(e){var n=p&&p.__createBinding||(Object.create?function(o,d,u,l){l===void 0&&(l=u);var v=Object.getOwnPropertyDescriptor(d,u);(!v||("get"in v?!d.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return d[u]}}),Object.defineProperty(o,l,v)}:function(o,d,u,l){l===void 0&&(l=u),o[l]=d[u]}),t=p&&p.__exportStar||function(o,d){for(var u in o)u!=="default"&&!Object.prototype.hasOwnProperty.call(d,u)&&n(d,o,u)},s=p&&p.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSDKVersion=void 0;const a=s($);e.default=a.default,t($,e),t(re,e),t(C,e),t(F,e);var r=X;Object.defineProperty(e,"getSDKVersion",{enumerable:!0,get:function(){return r.getSDKVersion}}),t(q,e)})(ee);const Yn=pe(ee),ds=Object.freeze(Object.defineProperty({__proto__:null,default:Yn},Symbol.toStringTag,{value:"Module"}));(function(e){var n=p&&p.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.useSafeAppsSDK=e.SafeProvider=void 0;const t=un,s=cn,a=n(ee),r=(0,s.createContext)(void 0),o=({loader:u=null,opts:l,children:v})=>{const[S]=(0,s.useState)(()=>new a.default(l)),[g,_]=(0,s.useState)(!1),[y,m]=(0,s.useState)({safeAddress:"",chainId:1,threshold:1,owners:[],isReadOnly:!0}),I=(0,s.useMemo)(()=>({sdk:S,connected:g,safe:y}),[S,g,y]);return(0,s.useEffect)(()=>{let L=!0;return(async()=>{try{const w=await S.safe.getInfo();if(!L)return;m(w),_(!0)}catch{if(!L)return;_(!1)}})(),()=>{L=!1}},[S]),!g&&u?u:(0,t.jsx)(r.Provider,{value:I,children:v})};e.SafeProvider=o;const d=()=>{const u=(0,s.useContext)(r);if(u===void 0)throw new Error("You probably forgot to put <SafeProvider>.");return u};e.useSafeAppsSDK=d,e.default=e.SafeProvider})(ln);var Se={exports:{}},G=typeof Reflect=="object"?Reflect:null,et=G&&typeof G.apply=="function"?G.apply:function(n,t,s){return Function.prototype.apply.call(n,t,s)},Z;G&&typeof G.ownKeys=="function"?Z=G.ownKeys:Object.getOwnPropertySymbols?Z=function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Z=function(n){return Object.getOwnPropertyNames(n)};function zn(e){console&&console.warn&&console.warn(e)}var ft=Number.isNaN||function(n){return n!==n};function E(){E.init.call(this)}Se.exports=E;Se.exports.once=ts;E.EventEmitter=E;E.prototype._events=void 0;E.prototype._eventsCount=0;E.prototype._maxListeners=void 0;var tt=10;function he(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(E,"defaultMaxListeners",{enumerable:!0,get:function(){return tt},set:function(e){if(typeof e!="number"||e<0||ft(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");tt=e}});E.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};E.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||ft(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this};function lt(e){return e._maxListeners===void 0?E.defaultMaxListeners:e._maxListeners}E.prototype.getMaxListeners=function(){return lt(this)};E.prototype.emit=function(n){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var a=n==="error",r=this._events;if(r!==void 0)a=a&&r.error===void 0;else if(!a)return!1;if(a){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var d=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw d.context=o,d}var u=r[n];if(u===void 0)return!1;if(typeof u=="function")et(u,this,t);else for(var l=u.length,v=pt(u,l),s=0;s<l;++s)et(v[s],this,t);return!0};function ht(e,n,t,s){var a,r,o;if(he(t),r=e._events,r===void 0?(r=e._events=Object.create(null),e._eventsCount=0):(r.newListener!==void 0&&(e.emit("newListener",n,t.listener?t.listener:t),r=e._events),o=r[n]),o===void 0)o=r[n]=t,++e._eventsCount;else if(typeof o=="function"?o=r[n]=s?[t,o]:[o,t]:s?o.unshift(t):o.push(t),a=lt(e),a>0&&o.length>a&&!o.warned){o.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=n,d.count=o.length,zn(d)}return e}E.prototype.addListener=function(n,t){return ht(this,n,t,!1)};E.prototype.on=E.prototype.addListener;E.prototype.prependListener=function(n,t){return ht(this,n,t,!0)};function Zn(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function gt(e,n,t){var s={fired:!1,wrapFn:void 0,target:e,type:n,listener:t},a=Zn.bind(s);return a.listener=t,s.wrapFn=a,a}E.prototype.once=function(n,t){return he(t),this.on(n,gt(this,n,t)),this};E.prototype.prependOnceListener=function(n,t){return he(t),this.prependListener(n,gt(this,n,t)),this};E.prototype.removeListener=function(n,t){var s,a,r,o,d;if(he(t),a=this._events,a===void 0)return this;if(s=a[n],s===void 0)return this;if(s===t||s.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete a[n],a.removeListener&&this.emit("removeListener",n,s.listener||t));else if(typeof s!="function"){for(r=-1,o=s.length-1;o>=0;o--)if(s[o]===t||s[o].listener===t){d=s[o].listener,r=o;break}if(r<0)return this;r===0?s.shift():$n(s,r),s.length===1&&(a[n]=s[0]),a.removeListener!==void 0&&this.emit("removeListener",n,d||t)}return this};E.prototype.off=E.prototype.removeListener;E.prototype.removeAllListeners=function(n){var t,s,a;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[n]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[n]),this;if(arguments.length===0){var r=Object.keys(s),o;for(a=0;a<r.length;++a)o=r[a],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=s[n],typeof t=="function")this.removeListener(n,t);else if(t!==void 0)for(a=t.length-1;a>=0;a--)this.removeListener(n,t[a]);return this};function _t(e,n,t){var s=e._events;if(s===void 0)return[];var a=s[n];return a===void 0?[]:typeof a=="function"?t?[a.listener||a]:[a]:t?es(a):pt(a,a.length)}E.prototype.listeners=function(n){return _t(this,n,!0)};E.prototype.rawListeners=function(n){return _t(this,n,!1)};E.listenerCount=function(e,n){return typeof e.listenerCount=="function"?e.listenerCount(n):vt.call(e,n)};E.prototype.listenerCount=vt;function vt(e){var n=this._events;if(n!==void 0){var t=n[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}E.prototype.eventNames=function(){return this._eventsCount>0?Z(this._events):[]};function pt(e,n){for(var t=new Array(n),s=0;s<n;++s)t[s]=e[s];return t}function $n(e,n){for(;n+1<e.length;n++)e[n]=e[n+1];e.pop()}function es(e){for(var n=new Array(e.length),t=0;t<n.length;++t)n[t]=e[t].listener||e[t];return n}function ts(e,n){return new Promise(function(t,s){function a(o){e.removeListener(n,r),s(o)}function r(){typeof e.removeListener=="function"&&e.removeListener("error",a),t([].slice.call(arguments))}Et(e,n,r,{once:!0}),n!=="error"&&ns(e,a,{once:!0})})}function ns(e,n,t){typeof e.on=="function"&&Et(e,"error",n,t)}function Et(e,n,t,s){if(typeof e.on=="function")s.once?e.once(n,t):e.on(n,t);else if(typeof e.addEventListener=="function")e.addEventListener(n,function a(r){s.once&&e.removeEventListener(n,a),t(r)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Tt=Se.exports;const fs=pe(Tt);var me={},ge={},k={};Object.defineProperty(k,"__esModule",{value:!0});k.numberToHex=k.getLowerCase=void 0;function ss(e){return e&&e.toLowerCase()}k.getLowerCase=ss;function rs(e){return`0x${e.toString(16)}`}k.numberToHex=rs;Object.defineProperty(ge,"__esModule",{value:!0});ge.SafeAppProvider=void 0;const H=ee,is=Tt,b=k;class as extends is.EventEmitter{constructor(n,t){super(),this.submittedTxs=new Map,this.safe=n,this.sdk=t}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(n){var a,r,o,d;const{method:t,params:s=[]}=n;switch(t){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,b.numberToHex)(this.chainId);case"personal_sign":{const[g,_]=s;if(this.safe.safeAddress.toLowerCase()!==_.toLowerCase())throw new Error("The address or message hash is invalid");const y=await this.sdk.txs.signMessage(g);return("signature"in y?y.signature:void 0)||"0x"}case"eth_sign":{const[g,_]=s;if(this.safe.safeAddress.toLowerCase()!==g.toLowerCase()||!_.startsWith("0x"))throw new Error("The address or message hash is invalid");const y=await this.sdk.txs.signMessage(_);return("signature"in y?y.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[g,_]=s,y=typeof _=="string"?JSON.parse(_):_;if(this.safe.safeAddress.toLowerCase()!==g.toLowerCase())throw new Error("The address is invalid");const m=await this.sdk.txs.signTypedMessage(y);return("signature"in m?m.signature:void 0)||"0x"}case"eth_sendTransaction":const u={...s[0],value:s[0].value||"0",data:s[0].data||"0x"};typeof u.gas=="string"&&u.gas.startsWith("0x")&&(u.gas=parseInt(u.gas,16));const l=await this.sdk.txs.send({txs:[u],params:{safeTxGas:u.gas}});return this.submittedTxs.set(l.safeTxHash,{from:this.safe.safeAddress,hash:l.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:u.data,value:u.value,to:u.to,blockHash:null,blockNumber:null,transactionIndex:null}),l.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,b.getLowerCase)(s[0]),s[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,b.getLowerCase)(s[0]),s[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,b.getLowerCase)(s[0]),s[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,b.getLowerCase)(s[0]),s[1],s[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([s[0],s[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([s[0],s[1]]);case"eth_getTransactionByHash":let S=s[0];try{S=(await this.sdk.txs.getBySafeTxHash(S)).txHash||S}catch{}return this.submittedTxs.has(S)?this.submittedTxs.get(S):this.sdk.eth.getTransactionByHash([S]).then(g=>(g&&(g.hash=s[0]),g));case"eth_getTransactionReceipt":{let g=s[0];try{g=(await this.sdk.txs.getBySafeTxHash(g)).txHash||g}catch{}return this.sdk.eth.getTransactionReceipt([g]).then(_=>(_&&(_.transactionHash=s[0]),_))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(s[0]);case"eth_call":return this.sdk.eth.call([s[0],s[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([s[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(s[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([s[0]]);case"wallet_sendCalls":{const{from:g,calls:_,chainId:y}=s[0];if(y!==(0,b.numberToHex)(this.chainId))throw new Error(`Safe is not on chain ${y}`);if(g!==this.safe.safeAddress)throw Error("Invalid from address");const m=_.map((N,w)=>{if(!N.to)throw new Error(`Invalid call #${w}: missing "to" field`);return{to:N.to,data:N.data??"0x",value:N.value??(0,b.numberToHex)(0)}}),{safeTxHash:I}=await this.sdk.txs.send({txs:m});return{id:I}}case"wallet_getCallsStatus":{const g=s[0],_={[H.TransactionStatus.AWAITING_CONFIRMATIONS]:100,[H.TransactionStatus.AWAITING_EXECUTION]:100,[H.TransactionStatus.SUCCESS]:200,[H.TransactionStatus.CANCELLED]:400,[H.TransactionStatus.FAILED]:500},y=await this.sdk.txs.getBySafeTxHash(g),m={version:"1.0",id:g,chainId:(0,b.numberToHex)(this.chainId),status:_[y.txStatus]};if(!y.txHash)return m;const I=await this.sdk.eth.getTransactionReceipt([y.txHash]);if(!I)return m;const L=((r=(a=y.txData)==null?void 0:a.dataDecoded)==null?void 0:r.method)!=="multiSend"?1:((d=(o=y.txData.dataDecoded.parameters)==null?void 0:o[0].valueDecoded)==null?void 0:d.length)??1,N=Number(I.blockNumber),w=Number(I.gasUsed);return m.receipts=Array(L).fill({logs:I.logs,status:(0,b.numberToHex)(y.txStatus===H.TransactionStatus.SUCCESS?1:0),blockHash:I.blockHash,blockNumber:(0,b.numberToHex)(N),gasUsed:(0,b.numberToHex)(w),transactionHash:y.txHash}),m}case"wallet_showCallsStatus":throw new Error(`"${n.method}" not supported`);case"wallet_getCapabilities":return{[(0,b.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${n.method}" not implemented`)}}send(n,t){n||t("Undefined request"),this.request(n).then(s=>t(null,{jsonrpc:"2.0",id:n.id,result:s})).catch(s=>t(s,null))}}ge.SafeAppProvider=as;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppProvider=void 0;var n=ge;Object.defineProperty(e,"SafeAppProvider",{enumerable:!0,get:function(){return n.SafeAppProvider}})})(me);const os=pe(me),ls=fn({__proto__:null,default:os},[me]);export{fs as N,ls as a,ln as d,Tt as e,ds as i};
